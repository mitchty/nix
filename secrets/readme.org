* Notes on secret setup

** Generating a passwd hash

Because I always forget how to do this

echo 'example' | openssl passwd -1 -stdin
-salt yoursalt

#+begin_src sh
$ echo example | openssl passwd -1 -stdin -salt examplesalt
$1$examples$9syBlMva027I.Vd2Z0JGl1
#+end_src

** Updating encrypted age keys

Update some specific age encrypted key.

#+begin_src sh
(cd secrets; agenix --verbose --edit passwd/mitch.age)
#+end_src

Rekey secrets, note you can pass in the spefic secret to rekey, will have to rekey everything for each specific host if you add a new host to specific secrets.
#+begin_src sh
(cd secrets; nix run github:ryantm/agenix -- --rekey)
#+end_src
